(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{226:function(e,t,n){},366:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(60),s=n.n(o),i=(n(226),n(15)),a=n(6),l=n(27),j=n(14),d=n(32),b=n(50);n(78).b.add(b.b,b.c,b.d,b.g,b.f,b.h,b.a,b.i,b.e,b.j);var u=n(26),h=n(56),O=n(8),x=n(10),f=n(185),m=n.n(f),g=localStorage.getItem("token"),p=m.a.create({baseURL:"api/"});p.defaults.headers.common.Authorization=g,p.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&localStorage.removeItem("token"),Promise.reject(e)}));var v=p,w=n(1),y=Object(c.createContext)(),S={token:null,user:null,cheking:!0},C=function(e){var t=e.children,n=Object(c.useState)(S),r=Object(x.a)(n,2),o=r[0],s=r[1],i=Object(c.useCallback)((function(){s(Object(O.a)(Object(O.a)({},S),{},{cheking:!0})),v({method:"POST",url:"auth/renew"}).then((function(e){var t=e.data,n=t.user,c=t.token;localStorage.setItem("token",c),s({user:n,token:c,cheking:!1})})).catch((function(e){console.log(e.response),localStorage.removeItem("token"),s(Object(O.a)(Object(O.a)({},S),{},{cheking:!1}))}))}),[]);return Object(w.jsx)(y.Provider,{value:{auth:o,setAuth:s,checkToken:i},children:t})},k=n(54),_=n(80),z=["size","src","online"],I=function(e){var t=e.size,n=void 0===t?"md":t,c=e.src,r=e.online,o=void 0===r||r,s=Object(k.a)(e,z);return Object(w.jsx)(_.a,Object(O.a)(Object(O.a)({},s),{},{size:n,src:c,alt:"avatar",mx:2,pos:"relative",border:"2px solid white",_after:{content:'""',w:4,h:4,bg:o?"green.300":"red.300",border:"2px solid white",rounded:"full",pos:"absolute",bottom:0,right:3}}))},A=n(187),N=n.n(A),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=(e=e.trim()).toLowerCase();var t=N()(e),n="https://www.gravatar.com/avatar/".concat(t,"?d=identicon&f=y&s=128");return n},F=n(19),q="chat/list/users",P="chat/activate",R="chat/send/message",L="chat/load",T="/auth/logout",W="chat/list/",M="chat/Typing",U="chat/not/Typing",G=function(e){return{type:P,payload:e}},B=function(e){return{type:L,payload:e}},V=n(86),D=n(7),H=function(){var e,t,n=Object(c.useContext)(y),r=n.auth,o=n.setAuth,s=Object(i.b)(),j=s.colorMode,b=s.toggleColorMode,O=Object(F.b)();return Object(w.jsxs)(a.e,{direction:"column",align:"center",justify:"space-around",h:"full",children:[Object(w.jsxs)(a.p,{children:[Object(w.jsx)(V.a,{label:"Home",placement:"auto-start",children:Object(w.jsx)(l.b,{to:"/",children:Object(w.jsx)(u.a,{children:Object(w.jsx)(d.a,{icon:["fa","home"]})})})}),Object(w.jsx)(V.a,{label:"Mensajes",placement:"auto-start",children:Object(w.jsx)(l.b,{to:"/messages",children:Object(w.jsx)(u.a,{children:Object(w.jsx)(d.a,{icon:["fa","comment-dots"]})})})}),Object(w.jsx)(V.a,{label:"Perfil",placement:"auto-start",children:Object(w.jsx)(l.b,{to:"profile/",children:Object(w.jsx)(u.a,{children:Object(w.jsx)(d.a,{icon:["fa","user"]})})})})]}),Object(w.jsx)(a.p,{}),Object(w.jsxs)(a.p,{children:[Object(w.jsx)(u.a,{onClick:b,children:"light"===j?Object(w.jsx)(d.a,{icon:["fa","moon"]}):Object(w.jsx)(d.a,{icon:["fa","lightbulb"]})}),Object(w.jsxs)(h.a,{children:[Object(w.jsx)(h.b,{as:u.b,icon:Object(w.jsx)(I,{size:"sm",src:null!==(e=r.user.picture)&&void 0!==e?e:E(r.user.email)})}),Object(w.jsxs)(h.f,{zIndex:"1000",border:"0",children:[Object(w.jsxs)(a.a,{p:"3",children:[Object(w.jsx)(a.a,{textAlign:"center",children:Object(w.jsx)(I,{size:"2xl",src:null!==(t=r.user.picture)&&void 0!==t?t:E(r.user.email)})}),Object(w.jsxs)(a.m,{spacing:0,align:"center",mb:5,children:[Object(w.jsx)(a.i,{fontSize:"2xl",fontWeight:500,fontFamily:"body",children:r.user.username}),Object(w.jsx)(a.n,{color:"gray.500",children:r.user.email})]})]}),Object(w.jsx)(l.b,{to:"profile/",children:Object(w.jsx)(h.d,{command:"\u2318T",children:"\ud83e\udd35 perfil "})}),Object(w.jsx)(h.d,{command:"\u2318T",children:"\u2699\ufe0f Configuracion"}),Object(w.jsx)(h.c,{}),Object(w.jsxs)(h.d,{command:"\u2318T",onClick:function(){O({type:T}),localStorage.removeItem("token"),o({user:null,token:null,cheking:!1})},children:[Object(w.jsx)(D.a,{viewBox:"0 0 200 200",color:"red.500",children:Object(w.jsx)("path",{fill:"currentColor",d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0"})}),"Salir"]})]})]})]})]})},Y=n(81),X=n(23),J=n(38),Z=["errors","touched","isRequired","label","help"],Q=["value"],K=function(e){var t=e.errors,n=e.touched,c=e.isRequired,r=void 0!==c&&c,o=e.label,s=e.help,i=Object(k.a)(e,Z),l=i.value,j=Object(k.a)(i,Q);return Object(w.jsxs)(X.a,{isInvalid:t&&n,isRequired:r,children:[Object(w.jsx)(X.d,{children:o}),Object(w.jsx)(J.a,Object(O.a)(Object(O.a)({},j),{},{value:l||""})),t&&n?Object(w.jsx)(X.b,{children:Object(w.jsx)(a.o,{children:t instanceof Array?t.map((function(e,t){return Object(w.jsx)(a.l,{children:e},t)})):Object(w.jsx)(a.l,{children:t})})}):Object(w.jsx)(X.c,{children:s})]})},$=n(124),ee=n(82),te=["errors","touched","isRequired","label","help"],ne=["value"],ce=function(e){var t=e.errors,n=e.touched,r=e.isRequired,o=void 0!==r&&r,s=e.label,i=e.help,l=Object(k.a)(e,te),j=Object(c.useState)(!1),d=Object(x.a)(j,2),b=d[0],u=d[1],h=l.value,f=Object(k.a)(l,ne);return Object(w.jsxs)(X.a,{isInvalid:t&&n,isRequired:o,children:[Object(w.jsx)(X.d,{children:s}),Object(w.jsxs)(J.b,{children:[Object(w.jsx)(J.a,Object(O.a)({type:b?"text":"password",value:h||""},f)),Object(w.jsx)(J.c,{children:Object(w.jsx)(ee.a,{size:"sm",checked:b,onChange:function(e){return u(e.target.checked)}})})]}),t&&n?Object(w.jsx)(X.b,{children:Object(w.jsx)(a.o,{children:t instanceof Array?t.map((function(e,t){return Object(w.jsx)(a.l,{children:e},t)})):Object(w.jsx)(a.l,{children:t})})}):Object(w.jsx)(X.c,{children:i})]})},re=n(37),oe=re.a().shape({username:re.c().required("El username es obligatorio"),password:re.c().required("El password es obligatorio")}),se=re.a().shape({username:re.c().required("El username es obligatorio"),password:re.c().required("El password es obligatorio").min(6,"La contrase\xf1a debe contener al menos 6 caracteres"),password2:re.c().required("El password es obligatorio").min(6,"La contrase\xf1a debe contener al menos 6 caracteres").oneOf([re.b("password"),null],"Las contrase\xf1as no coinciden"),firstName:re.c().required("El nombre es requerido"),lastName:re.c().required("El Apellido es requerido"),email:re.c().required("El email es requerido").email("No es un email v\xe1lido"),gender:re.c().required("El Genero es requerido")}),ie=function(){var e=Object(c.useContext)(y).setAuth,t=Object($.a)({initialValues:{remember:!0,username:localStorage.getItem("username")},onSubmit:function(n){var c,r;n.remember?localStorage.setItem("username",n.username):localStorage.removeItem("username"),c=n.username,r=n.password,v({method:"POST",url:"auth/login",data:{username:c,password:r}}).then((function(t){console.log(t);var n=t.data,c=n.user,r=n.token;localStorage.setItem("token",r),e({user:c,token:r,cheking:!1})})).catch((function(e){var n;console.log(e.response),(null===(n=e.response)||void 0===n?void 0:n.data)&&t.setErrors(e.response.data)}))},validationSchema:oe});return Object(w.jsxs)(a.a,{as:"form",mt:10,onSubmit:t.handleSubmit,children:[Object(w.jsx)(a.i,{mb:"2",children:"Login"}),Object(w.jsxs)(a.m,{spacing:4,children:[Object(w.jsx)(K,Object(O.a)({errors:t.errors.username,touched:t.touched.username,isRequired:!0,label:"Username",help:"Ingrese su nombre de usuario",type:"text",variant:"filled",placeholder:"Usuario",_focus:{bg:Object(i.c)("ini","gray.600")},autoComplete:"none"},t.getFieldProps("username"))),Object(w.jsx)(ce,Object(O.a)({errors:t.errors.password,touched:t.touched.password,isRequired:!0,label:"Password",help:"Ingrese la contrase\xf1a",variant:"filled",placeholder:"Contrase\xf1a",_focus:{bg:Object(i.c)("ini","gray.700")},autoComplete:"none"},t.getFieldProps("password"))),Object(w.jsxs)(X.a,{display:"flex",alignItems:"center",children:[Object(w.jsx)(X.d,{htmlFor:"email-alerts",mb:"0",children:"\xbfRecordarme cuenta?"}),Object(w.jsx)(ee.a,Object(O.a)(Object(O.a)({},t.getFieldProps("remember")),{},{defaultChecked:!0}))]})]}),Object(w.jsx)(u.a,{type:"submit",fontFamily:"heading",mt:8,w:"full",bgGradient:"linear(to-r, red.400,pink.400)",color:"white",_hover:{bgGradient:"linear(to-r, red.400,pink.400)",boxShadow:"xl"},disabled:!t.isValid,children:"Iniciar sesi\xf3n"}),Object(w.jsx)(l.b,{to:"/auth/signup",children:Object(w.jsx)(u.a,{w:"full",variant:"link",shadow:"none",_focus:{outline:"none"},children:"Crear cuenta"})})]})},ae=n(115),le=["errors","touched","isRequired","label","help","options"],je=function(e){var t=e.errors,n=e.touched,c=e.isRequired,r=void 0!==c&&c,o=e.label,s=e.help,i=e.options,l=void 0===i?[]:i,j=Object(k.a)(e,le);return Object(w.jsxs)(X.a,{isInvalid:t&&n,isRequired:r,children:[Object(w.jsx)(X.d,{children:o}),Object(w.jsx)(ae.a,Object(O.a)(Object(O.a)({},j),{},{children:l.map((function(e){return Object(w.jsx)("option",{value:e.value,children:e.name},e.value)}))})),t&&n?Object(w.jsx)(X.b,{children:Object(w.jsx)(a.o,{children:t instanceof Array?t.map((function(e,t){return Object(w.jsx)(a.l,{children:e},t)})):Object(w.jsx)(a.l,{children:t})})}):Object(w.jsx)(X.c,{children:s})]})},de=function(){var e=Object(c.useContext)(y).setAuth,t=Object($.a)({initialValues:{},onSubmit:function(n){v({method:"POST",url:"/auth/signup",data:n}).then((function(t){console.log(t);var n=t.data,c=n.user,r=n.token;localStorage.setItem("token",r),e({user:c,token:r})})).catch((function(e){t.setErrors(e.response.data)}))},validationSchema:se});return Object(w.jsxs)(a.m,{spacing:4,as:"form",onSubmit:t.handleSubmit,children:[Object(w.jsx)(a.i,{mb:"2",children:"Signup"}),Object(w.jsx)(K,Object(O.a)({errors:t.errors.username,touched:t.touched.username,isRequired:!0,label:"Username",help:"Ingrese un nombre de usuario",type:"text",variant:"filled",placeholder:"Usuario",_focus:{bg:Object(i.c)("ini","gray.700")},autoComplete:"none"},t.getFieldProps("username"))),Object(w.jsxs)(a.m,{direction:{base:"column",lg:"row"},children:[Object(w.jsx)(ce,Object(O.a)({errors:t.errors.password,touched:t.touched.password,isRequired:!0,label:"Password",help:"Ingrese la contrase\xf1a",variant:"filled",placeholder:"Contrase\xf1a",_focus:{bg:Object(i.c)("ini","gray.700")},autoComplete:"none"},t.getFieldProps("password"))),Object(w.jsx)(ce,Object(O.a)({errors:t.errors.password2,touched:t.touched.password2,isRequired:!0,label:"Confirmar contrase\xf1a",help:"Confirmar Contrase\xf1a",variant:"filled",placeholder:"Contrase\xf1a",_focus:{bg:Object(i.c)("ini","gray.700")},autoComplete:"none"},t.getFieldProps("password2")))]}),Object(w.jsxs)(a.m,{direction:{base:"column",lg:"row"},children:[Object(w.jsx)(K,Object(O.a)({errors:t.errors.firstName,touched:t.touched.firstName,isRequired:!0,label:"Nombre ",help:"Ingrese su nombre ",type:"text",variant:"filled",placeholder:"Nombre ",_focus:{bg:Object(i.c)("ini","gray.700")},autoComplete:"none"},t.getFieldProps("firstName"))),Object(w.jsx)(K,Object(O.a)({errors:t.errors.lastName,touched:t.touched.lastName,isRequired:!0,label:"Apellidos ",help:"Ingrese su apellido ",type:"text",variant:"filled",placeholder:"apellidos ",_focus:{bg:Object(i.c)("ini","gray.700")},autoComplete:"none"},t.getFieldProps("lastName")))]}),Object(w.jsxs)(a.m,{direction:{base:"column",lg:"row"},children:[Object(w.jsx)(K,Object(O.a)({errors:t.errors.email,touched:t.touched.email,isRequired:!0,label:"Email",help:"Ingrese su correo",type:"email",variant:"filled",placeholder:"Email",_focus:{bg:Object(i.c)("ini","gray.700")},autoComplete:"none"},t.getFieldProps("email"))),Object(w.jsx)(je,Object(O.a)(Object(O.a)({errors:t.errors.gender,touched:t.touched.gender,isRequired:!0,label:"G\xe9nero",help:"Ingrese su g\xe9nero",placeholder:"Seleccione el g\xe9nero...",variant:"filled",bg:Object(i.c)("gray.50","gray.700"),_focus:{bg:Object(i.c)("ini","gray.700")},autoComplete:"none"},t.getFieldProps("gender")),{},{options:[{value:"Masculino",name:"Masculino"},{value:"Femenino",name:"Femenino"},{value:"Otro",name:"Otro"}]}))]}),Object(w.jsx)(u.a,{fontFamily:"heading",type:"submit",mt:8,w:"full",bgGradient:"linear(to-r, red.400,pink.400)",color:"white",_hover:{bgGradient:"linear(to-r, red.400,pink.400)",boxShadow:"xl"},disabled:!t.isValid||0===Object.keys(t.touched).length,children:"Crear cuenta"}),Object(w.jsx)(l.b,{to:"/auth/login",children:Object(w.jsx)(u.a,{w:"full",variant:"link",shadow:"none",_focus:{outline:"none"},children:"Login"})})]})},be=function(){var e=Object(j.g)().pathname;return Object(w.jsxs)(a.c,{as:a.e,maxW:"7xl",minH:"100vh",align:"center",justifyContent:"center",flexDir:{base:"column-reverse",md:"row"},children:[Object(w.jsx)(a.m,{flex:"3",children:Object(w.jsx)(Y.a,{src:"https://mdbootstrap.com/img/Photos/new-templates/bootstrap-login-form/draw2.svg",alt:"Segun Adebayo"})}),Object(w.jsx)(a.m,{flex:"2",m:5,children:Object(w.jsx)(a.a,{bg:Object(i.c)("gray.50","gray.800"),p:"10",rounded:"2xl",boxShadow:"lg",children:"/auth/login"===e?Object(w.jsx)(ie,{}):Object(w.jsx)(de,{})})})]})},ue=n(84),he=n(99),Oe=n.n(he);n(353);Oe.a.locale("es");var xe=function(e){return Oe()(e).format("LLLL")},fe=function(e){var t,n,c=e.me,r=void 0!==c&&c,o=e.message,s=Object(i.c)(r?"gray.100":"cyan.100",r?"gray.800":"blue.900");return Object(w.jsxs)(a.e,{maxW:{base:"85%",lg:"80%"},w:"fit-content",align:"end",ms:r?"auto":"0",my:"2",children:[!r&&Object(w.jsx)(I,{size:"sm",src:null!==(t=o.from.picture)&&void 0!==t?t:E(o.from.email)}),Object(w.jsxs)(a.m,{bg:s,boxShadow:"lg",p:8,rounded:"xl",pos:"relative",_after:{content:'""',w:0,h:0,border:"10px solid transparent",borderLeftColor:r?"transparent":s,borderTopColor:r?"transparent":s,borderRightColor:r?s:"transparent",borderBlockColor:r?s:"transparent",pos:"absolute",bottom:"-10px",left:r?"initial":"0",right:r?"0":"initial"},children:[Object(w.jsx)(a.n,{color:Object(i.c)("gray.600","gray.400"),fontSize:"md",children:o.content}),Object(w.jsxs)(a.n,{fontSize:"small",textAlign:r?"left":"right",children:[Object(w.jsx)(d.a,{icon:["fa","clock"]})," ",xe(o.createdAt)]})]}),r&&Object(w.jsx)(I,{size:"sm",src:null!==(n=o.from.picture)&&void 0!==n?n:E(o.from.email)})]})},me=function(){var e=Object(F.c)((function(e){return e.chat.messages})),t=Object(c.useContext)(y).auth;return Object(w.jsx)(a.a,{h:"full",p:"2",className:"scroll",id:"chatContainer",children:e.map((function(e){return Object(w.jsx)(fe,{me:t.user._id===e.from._id,message:e},e._id)}))})},ge=n(200),pe=n(197),ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;pe.animateScroll.scrollToBottom({containerId:e,duration:t})},we=function(e){var t=Object(c.useState)(null),n=Object(x.a)(t,2),r=n[0],o=n[1],s=Object(c.useState)(!1),i=Object(x.a)(s,2),a=i[0],l=i[1],j=Object(F.b)(),d=Object(c.useCallback)((function(t){var n=ge.a.connect(e,{transports:["websocket"],forceNew:!0,query:{token:t}});o(n)}),[e]),b=Object(c.useCallback)((function(){null===r||void 0===r||r.disconnect()}),[r]);return Object(c.useEffect)((function(){l(null===r||void 0===r?void 0:r.connected)}),[r]),Object(c.useEffect)((function(){null===r||void 0===r||r.on("connect",(function(){return l(!0)}))}),[r]),Object(c.useEffect)((function(){null===r||void 0===r||r.on("disconnect",(function(){return l(!1)}))}),[r]),Object(c.useEffect)((function(){null===r||void 0===r||r.on("list-users",(function(e){j(function(e){return{type:q,payload:e}}(e))}))}),[r,j]),Object(c.useEffect)((function(){null===r||void 0===r||r.on("list-messages",(function(e){j({type:W,payload:e})}))}),[r,j]),Object(c.useEffect)((function(){null===r||void 0===r||r.on("receive-message",(function(e){j(function(e){return{type:R,payload:e}}(e)),ve("chatContainer",0)}))}),[r,j]),Object(c.useEffect)((function(){null===r||void 0===r||r.on("typing",(function(e){j(function(e){return{type:M,payload:e}}(e))}))}),[r,j]),Object(c.useEffect)((function(){null===r||void 0===r||r.on("not-typing",(function(e){j(function(e){return{type:U,payload:e}}(e))}))}),[r,j]),{socket:r,online:a,connectSocket:d,disconnectSocket:b}},ye=Object(c.createContext)(),Se=function(e){var t=e.children,n=we(""),r=n.socket,o=n.online,s=n.connectSocket,i=n.disconnectSocket,a=Object(c.useContext)(y).auth;return Object(c.useEffect)((function(){a.token&&s(a.token)}),[a.token,s]),Object(c.useEffect)((function(){a.token||i()}),[a.token,i]),Object(w.jsx)(ye.Provider,{value:{socket:r,online:o},children:t})},Ce=function(){var e=Object(c.useState)(""),t=Object(x.a)(e,2),n=t[0],r=t[1],o=Object(c.useContext)(ye).socket,s=Object(c.useContext)(y).auth,i=Object(F.c)((function(e){return e.chat.userSelected}));return Object(w.jsxs)(a.e,{h:16,alignItems:"center",justifyContent:"space-between",p:4,as:"form",onSubmit:function(e){e.preventDefault(),0!==n.trim().length&&(o.emit("send-message",{from:s.user._id,to:i._id,content:n}),r(""))},children:[Object(w.jsx)(J.a,{type:"text",value:n,placeholder:"Enviar mensaje",variant:"filled",onChange:function(e){r(e.target.value)},onFocus:function(){console.log("typing"),o.emit("typing",{from:s.user._id,to:i._id})},onBlur:function(){console.log("no typing"),o.emit("not-typing",{from:s.user._id,to:i._id})}}),Object(w.jsx)(a.m,{direction:"row",spacing:7,mx:"3",children:Object(w.jsx)(u.a,{type:"submit",children:Object(w.jsx)(d.a,{icon:["fa","paper-plane"]})})})]})},ke=n(34),_e=function(){var e,t=Object(F.c)((function(e){return e.chat.userSelected}));return Object(w.jsxs)(a.a,{rounded:"lg",children:[Object(w.jsxs)(a.e,{alignItems:"center",justifyContent:"space-between",py:3,mx:"1",children:[Object(w.jsxs)(a.h,{children:[Object(w.jsx)(I,{src:null!==(e=t.picture)&&void 0!==e?e:E(t.email),online:t.online}),Object(w.jsxs)(a.f,{children:[Object(w.jsxs)(a.i,{fontSize:{base:"md",lg:"xl"},fontFamily:"body",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:[t.firstName," ",t.lastName]}),Object(w.jsxs)(a.e,{direction:{base:"column",lg:"row"},children:[Object(w.jsx)(a.n,{me:"3",fontWeight:600,color:"gray.500",children:t.email}),Object(w.jsxs)(a.n,{fontSize:"small",my:"auto",children:[Object(w.jsx)(d.a,{icon:["fa","clock"]}),"  ",xe(t.lastLogin)]})]})]})]}),Object(w.jsx)(a.e,{alignItems:"center",children:Object(w.jsxs)(h.a,{children:[Object(w.jsx)(h.b,{as:u.b,"aria-label":"Options",icon:Object(w.jsx)(ke.e,{}),variant:"outline"}),Object(w.jsx)(h.f,{children:Object(w.jsx)(l.b,{to:"/profile/".concat(t._id),children:Object(w.jsx)(h.d,{icon:Object(w.jsx)(ke.d,{}),children:"Ver perfil"})})})]})})]}),Object(w.jsx)(a.d,{})]})},ze=function(){return Object(w.jsxs)(a.e,{direction:"column",h:"full",children:[Object(w.jsx)(_e,{}),Object(w.jsx)(me,{flex:"1"}),Object(w.jsx)(Ce,{})]})},Ie=function(e){var t,n,c=e.chat,r=e.setShow,o=Object(F.b)(),s=Object(F.c)((function(e){return e.chat.userSelected})),l=Object(i.c)("gray.200","gray.700"),j=Object(ue.b)("(min-width: 62em)"),d=Object(x.a)(j,1)[0];return Object(w.jsxs)(a.e,{justify:"space-between",py:4,px:2,_hover:{backgroundColor:l},cursor:"pointer",rounded:"md",onClick:function(){(null===s||void 0===s?void 0:s._id)!==c._id&&(r(d),o(G(c)),v({url:"message/".concat(c._id),headers:{Authorization:localStorage.getItem("token")}}).then((function(e){o(B(e.data)),ve("chatContainer",0)})).catch((function(e){console.log(e.response)})))},bg:c._id===(null===s||void 0===s?void 0:s._id)?l:"initial",children:[Object(w.jsxs)(a.h,{children:[Object(w.jsx)(I,{online:c.online,src:null!==(t=c.picture)&&void 0!==t?t:E(c.email)}),Object(w.jsxs)(a.f,{children:[Object(w.jsx)(a.i,{size:"sm",children:c.username}),Object(w.jsxs)(a.n,{color:"gray.500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:[c.sendMe?null:"T\xfa:",c.content]})]})]}),Object(w.jsxs)(a.a,{whiteSpace:"nowrap",children:[c.online?Object(w.jsx)(a.n,{color:"green",fontSize:"sm",children:"En linea"}):Object(w.jsx)(a.n,{fontSize:"sm",children:(n=c.lastLogin,Oe()(n).startOf("min").fromNow(!0))}),Object(w.jsx)(a.n,{color:"green",fontSize:"sm",children:c.typing?"Escribiendo...":""})]})]})},Ae=function(e){var t,n=e.user,c=e.setShow,r=Object(F.c)((function(e){return e.chat.userSelected})),o=Object(F.b)(),s=Object(ue.b)("(min-width: 62em)"),i=Object(x.a)(s,1)[0];return Object(w.jsxs)(a.a,{cursor:"pointer",onClick:function(){c(i),(null===r||void 0===r?void 0:r._id)!==n._id&&(o(G(n)),v({url:"message/".concat(n._id),headers:{Authorization:localStorage.getItem("token")}}).then((function(e){o(B(e.data)),ve("chatContainer",0)})).catch((function(e){console.log(e.response)})))},children:[Object(w.jsx)(I,{online:n.online,src:null!==(t=n.picture)&&void 0!==t?t:E(n.email)}),Object(w.jsx)(a.n,{color:"gray.500",textAlign:"center",children:n.username})]})},Ne=n(143),Ee=n.n(Ne),Fe=n(198),qe=function(e){var t,n=e.user,r=Object(i.c)("gray.200","gray.700"),o=Object(i.c)("#151f21","gray.800"),s=Object(c.useContext)(y),d=s.auth.user,b=s.setAuth,h=Object(c.useState)(n),f=Object(x.a)(h,2),m=f[0],g=f[1],p=Object(F.b)(),S=Object(j.h)(),C=Object(F.c)((function(e){return e.chat.userSelected})),k=function(){v({url:"user/follow",method:"POST",data:{id:m._id},headers:{Authorization:localStorage.getItem("token")}}).then((function(e){g(e.data.user),b((function(t){return Object(O.a)(Object(O.a)({},t),{},{user:e.data.me})}))})).catch((function(e){console.log(e.response)}))};return Object(w.jsxs)(a.e,{justify:"space-between",py:2,_hover:{backgroundColor:r},cursor:"pointer",rounded:"md",align:"center",children:[Object(w.jsxs)(a.h,{children:[Object(w.jsx)(I,{online:m.online,src:null!==(t=m.avatar)&&void 0!==t?t:E(m.email)}),Object(w.jsxs)(a.f,{children:[Object(w.jsx)(a.n,{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:Object(w.jsx)(a.j,{variant:"link",size:"sm",onClick:function(){S("/profile/".concat(m._id))},children:m.firstName+" "+m.lastName})}),Object(w.jsx)(a.n,{color:"gray.500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:m.email})]})]}),Object(w.jsxs)(a.a,{whiteSpace:"nowrap",mx:"2",textAlign:"end",children:[m.followers.some((function(e){return e._id===d._id}))?Object(w.jsx)(u.a,{variant:"outline",size:"sm",bg:o,color:"white",rounded:"md",_hover:{transform:"translateY(-2px)",boxShadow:"lg"},onClick:k,children:"UnFollow"}):Object(w.jsx)(u.a,{size:"sm",bg:o,color:"white",rounded:"md",_hover:{transform:"translateY(-2px)",boxShadow:"lg"},onClick:k,children:"Follow"}),Object(w.jsx)(a.j,{to:"/messages",onClick:function(){(null===C||void 0===C?void 0:C._id)!==m._id&&(p(G(m)),v({url:"message/".concat(m._id),headers:{Authorization:localStorage.getItem("token")}}).then((function(e){p(B(e.data)),ve("chatContainer",0)})).catch((function(e){console.log(e.response)})))},as:l.b,variant:"solid",children:Object(w.jsx)(u.b,{mx:"1",size:"sm",icon:Object(w.jsx)(ke.c,{}),_hover:{transform:"translateY(-2px)",boxShadow:"lg"}})})]})]})},Pe=function(){var e=Object(c.useState)([]),t=Object(x.a)(e,2),n=t[0],r=t[1],o=function(){var e=Object(Fe.a)(Ee.a.mark((function e(t){var n,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.target.value.trim())){e.next=14;break}return e.prev=2,e.next=5,v({method:"POST",url:"auth/list?keyword=".concat(n),headers:{Authorization:localStorage.getItem("token")}});case 5:c=e.sent,r(c.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response);case 12:e.next=15;break;case 14:r([]);case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(a.a,{position:"relative",children:[Object(w.jsx)(J.a,{type:"search",placeholder:"Buscar...",variant:"filled",onChange:o}),Object(w.jsx)(a.a,{position:"absolute",zIndex:"100",bg:Object(i.c)("gray.100","blue.900"),w:"full",rounded:"lg",boxShadow:"2xl",children:n.map((function(e){return Object(w.jsx)(qe,{user:e},e._id)}))})]})},Re=function(e){var t=e.setShow,n=Object(c.useContext)(y).auth,r=Object(F.c)((function(e){return e.chat.users})),o=Object(F.c)((function(e){return e.chat.chats})),s=Object(i.c)("gray.50","gray.800"),l=Object(ue.a)({base:"initial",lg:"500px"});return Object(w.jsxs)(a.e,{direction:"column",h:"full",position:{base:"absolute",md:"initial"},zIndex:"600",maxW:l,p:3,bg:s,children:[Object(w.jsxs)(a.a,{children:[Object(w.jsx)(a.i,{my:2,size:"lg",children:"Chats"}),Object(w.jsx)(Pe,{}),Object(w.jsx)(a.d,{my:"1"})]}),Object(w.jsx)(a.f,{templateColumns:"repeat(5,1fr)",children:r.filter((function(e){return n.user._id!==e._id})).map((function(e){return Object(w.jsx)(Ae,{user:e,setShow:t},e._id)}))}),Object(w.jsx)(a.i,{size:"md",mb:4,children:"Recientes"}),Object(w.jsx)(a.a,{flex:"1",className:"scroll",children:o.map((function(e){return Object(w.jsx)(Ie,{chat:e,setShow:t},e._id)}))})]})},Le=function(){return Object(w.jsxs)(a.e,{align:"center",justify:"center",h:"full",direction:"column",children:[Object(w.jsxs)(a.i,{textAlign:"center",fontWeight:"extrabold",fontSize:{base:"2xl",sm:"3xl",md:"4xl",lg:"6xl"},lineHeight:"110%",color:"green.400",bgClip:"text",bgGradient:"linear(to-l, #5028ca, #00ff95bf)",children:["No a seleccionado ning\xfan chat ",Object(w.jsx)("br",{})]}),Object(w.jsx)(a.n,{as:"span",color:"gray.600",fontSize:"xl",textAlign:"center",children:"usa la lupa para buscar personas"})]})},Te=function(){var e=Object(F.c)((function(e){return e.chat.userSelected})),t=Object(ue.b)("(min-width: 48em)"),n=Object(x.a)(t,1)[0],r=Object(c.useState)(n),o=Object(x.a)(r,2),s=o[0],l=o[1],j=Object(i.c)("white","gray.900");return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(a.a,{position:"relative",h:"full",children:[Object(w.jsx)(u.a,{m:"2",onClick:function(){return l((function(e){return!e}))},position:"absolute",right:"0",children:s?"X":">"}),s&&Object(w.jsx)(Re,{setShow:l})]}),Object(w.jsx)(a.a,{bg:j,flex:1,children:e?Object(w.jsx)(ze,{}):Object(w.jsx)(Le,{})})]})},We=function(){var e=Object(ue.a)({base:"10",md:"8",lg:"6",xl:"2"});return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(a.a,{flex:1,children:"Bonny"}),Object(w.jsx)(a.a,{flex:e,children:Object(w.jsx)(Pe,{})}),Object(w.jsx)(a.a,{flex:1,textAlign:"end",children:Object(w.jsx)(D.a,{as:ke.b,fontSize:"x-large"})})]})},Me=function(){var e=Object(F.c)((function(e){return e.chat.users})),t=Object(c.useContext)(y).auth.user;return Object(w.jsxs)(a.a,{children:[Object(w.jsx)(a.i,{size:"md",m:4,children:"Usuarios"}),e.filter((function(e){return e._id!==t._id})).map((function(e){return Object(w.jsx)(qe,{user:e},e._id)}))]})},Ue=n(3),Ge=n(9),Be=n(184),Ve=n(30),De=n(181),He=n(116),Ye=function(e){var t,n=e.setPosts,r=Object(c.useState)(null),o=Object(x.a)(r,2),s=o[0],l=o[1],j=Object(c.useState)(""),d=Object(x.a)(j,2),b=d[0],O=d[1],f=Object(c.useState)("public"),m=Object(x.a)(f,2),g=m[0],p=m[1],S=Object(c.useRef)(),C=Object(c.useContext)(y).auth.user;return Object(w.jsxs)(a.a,{bg:Object(i.c)("gray.100","gray.700"),rounded:"xl",children:[Object(w.jsxs)(a.h,{position:"relative",children:[Object(w.jsx)(De.a,{placeholder:"\xbfQu\xe9 estas pensando?",border:"0",px:"20",value:b,onChange:function(e){return O(e.target.value)}}),Object(w.jsx)(a.a,{position:"absolute",children:Object(w.jsx)(I,{online:C.online,src:null!==(t=C.avatar)&&void 0!==t?t:E(C.email)})}),Object(w.jsx)(J.a,{type:"file",onChange:function(e){return l(e.target.files[0])},ref:S,display:"none",accept:".png,.jpeg,.jpg"})]}),Object(w.jsx)("hr",{}),s&&Object(w.jsxs)(a.a,{position:"relative",children:[Object(w.jsx)(He.a,{bg:"gray",size:"lg",position:"absolute",right:"0",onClick:function(){return l(null)}}),Object(w.jsx)(Y.a,{alt:"No imagen",objectFit:"cover",src:URL.createObjectURL(s),w:"full"})]}),Object(w.jsxs)(a.e,{p:"2",justify:"space-between",children:[Object(w.jsxs)(a.h,{spacing:"5",children:[Object(w.jsx)(u.a,{leftIcon:Object(w.jsx)(ke.a,{}),variant:"link",onClick:function(){return S.current.click()},children:"Subir foto"}),Object(w.jsxs)(h.a,{closeOnSelect:!1,children:[Object(w.jsx)(h.b,{as:u.b,icon:Object(w.jsx)(ke.f,{}),variant:"link",children:" opciones"}),Object(w.jsx)(h.f,{children:Object(w.jsxs)(h.g,{defaultValue:g,title:"Tipo de publicaci\xf3n",type:"radio",onChange:function(e){return p(e)},children:[Object(w.jsx)(h.e,{value:"private",children:"Privado"}),Object(w.jsx)(h.e,{value:"follow",children:"solo amigos"}),Object(w.jsx)(h.e,{value:"public",children:"P\xfablico"})]})})]})]}),Object(w.jsx)(u.a,{onClick:function(){if(s||b){var e=new FormData;b&&e.append("content",b),s&&e.append("picture",s),e.append("type",g),v({url:"post",method:"POST",headers:{Authorization:localStorage.getItem("token")},data:e}).then((function(e){n((function(t){return[e.data].concat(Object(Ve.a)(t))})),l(null),O("")})).catch((function(e){console.log(e.response)}))}},children:"Publicar"})]})]})},Xe=function(e){var t,n=e.post,r=Object(c.useContext)(y).auth.user,o=Object(c.useState)(n),s=Object(x.a)(o,2),l=s[0],j=s[1],d=function(){v({url:"post/like",method:"POST",data:{id:l._id},headers:{Authorization:localStorage.getItem("token")}}).then((function(e){j(e.data)})).catch((function(e){console.log(e.response)}))};return Object(w.jsxs)(a.a,{bg:Object(i.c)("gray.100","gray.700"),rounded:"xl",my:"3",children:[Object(w.jsxs)(a.a,{p:"1",children:[Object(w.jsxs)(a.h,{justify:"space-between",children:[Object(w.jsxs)(a.h,{children:[Object(w.jsx)(I,{online:l.user.online,src:null!==(t=l.user.avatar)&&void 0!==t?t:E(l.user.email)}),Object(w.jsxs)(a.f,{children:[Object(w.jsx)(a.i,{size:"sm",children:l.user.firstName+" "+l.user.lastName}),Object(w.jsx)(a.n,{color:"gray.500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:l.user.email})]})]}),Object(w.jsx)(a.n,{children:xe(l.createdAt)})]}),Object(w.jsx)(Ue.d.p,{p:2,children:l.content})]}),Object(w.jsxs)(a.a,{position:"relative",children:[l.picture&&Object(w.jsx)(Y.a,{alt:"Login Image",objectFit:"cover",src:l.picture,w:"full",onDoubleClick:d}),Object(w.jsxs)(a.h,{position:"absolute",bottom:"0",m:"2",children:[Object(w.jsx)(D.a,{viewBox:"0 0 40 35",boxSize:10,color:l.likes.some((function(e){return e._id===r._id}))?"purple.600":"purple.200",_hover:{color:"purple.500"},onClick:d,children:Object(w.jsx)("path",{fill:"currentColor",d:"M10.7964 5.04553e-07C8.66112 -0.000123335 6.57374 0.632971 4.79827 1.81922C3.0228 3.00547 1.63898 4.69158 0.82182 6.66433C0.00466116 8.63708 -0.209132 10.8079 0.207477 12.9021C0.624087 14.9964 1.65239 16.9201 3.16233 18.4299L19.1153 34.3828C19.2395 34.5074 19.3871 34.6062 19.5496 34.6736C19.7121 34.741 19.8863 34.7757 20.0622 34.7757C20.2381 34.7757 20.4123 34.741 20.5748 34.6736C20.7373 34.6062 20.8848 34.5074 21.0091 34.3828L36.962 18.4272C38.9319 16.3917 40.0228 13.6636 39.9996 10.8311C39.9764 7.99858 38.8409 5.28867 36.838 3.28573C34.835 1.28279 32.1251 0.147283 29.2926 0.124081C26.4601 0.100879 23.732 1.19184 21.6965 3.1617L20.0622 4.79337L18.4305 3.1617C17.4276 2.15892 16.237 1.36356 14.9267 0.821064C13.6163 0.278568 12.2119 -0.000433066 10.7937 5.04553e-07H10.7964Z"})}),Object(w.jsx)(Je,{likes:l.likes})]})]})]})},Je=function(e){var t=e.likes,n=void 0===t?[]:t,c=Object(i.c)("gray.200","gray.700"),r=Object(Ge.f)(),o=r.isOpen,s=r.onOpen,l=r.onClose;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(u.a,{onClick:s,variant:"link",children:n.length}),Object(w.jsxs)(Be.a,{isOpen:o,onClose:l,children:[Object(w.jsx)(Be.f,{}),Object(w.jsxs)(Be.d,{children:[Object(w.jsxs)(Be.e,{children:["likes (",n.length,")"]}),Object(w.jsx)(Be.c,{}),Object(w.jsx)(Be.b,{children:n.map((function(e){var t;return Object(w.jsxs)(a.e,{justify:"space-between",py:4,px:2,_hover:{backgroundColor:c},cursor:"pointer",rounded:"md",children:[Object(w.jsxs)(a.h,{children:[Object(w.jsx)(I,{online:e.online,src:null!==(t=e.avatar)&&void 0!==t?t:E(e.email)}),Object(w.jsxs)(a.f,{children:[Object(w.jsx)(a.i,{size:"sm",children:e.firstName+" "+e.lastName}),Object(w.jsx)(a.n,{color:"gray.500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",children:e.email})]})]}),Object(w.jsx)(a.a,{whiteSpace:"nowrap",children:Object(w.jsx)(D.a,{viewBox:"0 0 40 35",boxSize:7,color:"purple.600",children:Object(w.jsx)("path",{fill:"currentColor",d:"M10.7964 5.04553e-07C8.66112 -0.000123335 6.57374 0.632971 4.79827 1.81922C3.0228 3.00547 1.63898 4.69158 0.82182 6.66433C0.00466116 8.63708 -0.209132 10.8079 0.207477 12.9021C0.624087 14.9964 1.65239 16.9201 3.16233 18.4299L19.1153 34.3828C19.2395 34.5074 19.3871 34.6062 19.5496 34.6736C19.7121 34.741 19.8863 34.7757 20.0622 34.7757C20.2381 34.7757 20.4123 34.741 20.5748 34.6736C20.7373 34.6062 20.8848 34.5074 21.0091 34.3828L36.962 18.4272C38.9319 16.3917 40.0228 13.6636 39.9996 10.8311C39.9764 7.99858 38.8409 5.28867 36.838 3.28573C34.835 1.28279 32.1251 0.147283 29.2926 0.124081C26.4601 0.100879 23.732 1.19184 21.6965 3.1617L20.0622 4.79337L18.4305 3.1617C17.4276 2.15892 16.237 1.36356 14.9267 0.821064C13.6163 0.278568 12.2119 -0.000433066 10.7937 5.04553e-07H10.7964Z"})})})]},e._id)}))})]})]})]})},Ze=function(){var e=Object(c.useState)([]),t=Object(x.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){v({url:"post",method:"GET",headers:{Authorization:localStorage.getItem("token")}}).then((function(e){r(e.data)})).catch((function(e){console.log(e.response)}))}),[]),Object(w.jsxs)(a.a,{p:"4",children:[Object(w.jsx)(Ye,{setPosts:r}),n.map((function(e){return Object(w.jsx)(Xe,{post:e},e._id)}))]})},Qe=function(e){var t,n=e.user,r=Object(i.c)("#151f21","gray.900"),o=Object(c.useState)(n),s=Object(x.a)(o,2),j=s[0],d=s[1],b=Object(c.useContext)(y),h=b.auth.user,f=b.setAuth,m=Object(F.b)(),g=Object(F.c)((function(e){return e.chat.userSelected})),p=function(){v({url:"user/follow",method:"POST",data:{id:j._id},headers:{Authorization:localStorage.getItem("token")}}).then((function(e){d(e.data.user),f((function(t){return Object(O.a)(Object(O.a)({},t),{},{user:e.data.me})}))})).catch((function(e){console.log(e.response)}))};return Object(w.jsx)(a.b,{py:6,children:Object(w.jsxs)(a.a,{maxW:"270px",w:"full",bg:Object(i.c)("white","gray.800"),boxShadow:"2xl",rounded:"md",overflow:"hidden",children:[Object(w.jsx)(Y.a,{h:"120px",w:"full",src:"https://fondosmil.com/fondo/31355.jpg",objectFit:"cover"}),Object(w.jsx)(a.e,{justify:"center",mt:-12,children:Object(w.jsx)(I,{src:null!==(t=null===j||void 0===j?void 0:j.picture)&&void 0!==t?t:E(j.email)})}),Object(w.jsxs)(a.a,{p:6,children:[Object(w.jsxs)(a.m,{spacing:0,align:"center",mb:5,children:[Object(w.jsxs)(a.i,{fontSize:"xl",fontWeight:500,fontFamily:"body",children:[j.firstName," ",j.lastName]}),Object(w.jsx)(a.n,{color:"gray.500",children:j.email})]}),Object(w.jsxs)(a.m,{direction:"row",justify:"center",spacing:6,children:[Object(w.jsxs)(a.m,{spacing:0,align:"center",children:[Object(w.jsx)(a.n,{fontWeight:600,children:j.followers.length}),Object(w.jsx)(a.n,{fontSize:"sm",color:"gray.500",children:"Followers"})]}),Object(w.jsxs)(a.m,{spacing:0,align:"center",children:[Object(w.jsx)(a.n,{fontWeight:600,children:j.following.length}),Object(w.jsx)(a.n,{fontSize:"sm",color:"gray.500",children:"Following"})]})]}),j.followers.some((function(e){return e._id===h._id}))?Object(w.jsx)(u.a,{my:"2",w:"full",variant:"outline",size:"sm",bg:r,color:"white",rounded:"md",_hover:{transform:"translateY(-2px)",boxShadow:"lg"},onClick:p,children:"UnFollow"}):Object(w.jsx)(u.a,{my:"2",w:"full",size:"sm",bg:r,color:"white",rounded:"md",_hover:{transform:"translateY(-2px)",boxShadow:"lg"},onClick:p,children:"Follow"}),Object(w.jsx)(a.j,{to:"/messages",onClick:function(){(null===g||void 0===g?void 0:g._id)!==j._id&&(m(G(j)),v({url:"message/".concat(j._id),headers:{Authorization:localStorage.getItem("token")}}).then((function(e){m(B(e.data)),ve("chatContainer",0)})).catch((function(e){console.log(e.response)})))},as:l.b,variant:"solid",children:Object(w.jsx)(u.b,{w:"full",mx:"1",size:"sm",icon:Object(w.jsx)(ke.c,{}),_hover:{transform:"translateY(-2px)",boxShadow:"lg"}})})]})]})})},Ke=function(){var e=Object(F.c)((function(e){return e.chat.users}));return Object(w.jsxs)(a.a,{children:[Object(w.jsx)(a.i,{size:"md",m:4,children:"Personas que quiz\xe1 conozcas"}),e.length>0&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Qe,{user:e[Math.random()*e.length|0]}),Object(w.jsx)(Qe,{user:e[Math.random()*e.length|0]})]})]})},$e=function(){var e=Object(ue.a)({base:"",lg:"scroll"});return Object(w.jsxs)(a.a,{w:"full",className:"scroll",children:[Object(w.jsx)(a.e,{w:"full",alignItems:"center",justifyContent:"space-around",h:"50px",bg:Object(i.c)("gray.100","blue.900"),px:"1",children:Object(w.jsx)(We,{})}),Object(w.jsxs)(a.e,{w:"full",g:1,h:"calc(100% - 50px)",direction:{base:"column",lg:"row"},children:[Object(w.jsx)(a.a,{p:"1",children:Object(w.jsx)(Me,{})}),Object(w.jsx)(a.a,{flex:1,className:e,children:Object(w.jsx)(Ze,{})}),Object(w.jsx)(a.a,{children:Object(w.jsx)(Ke,{})})]})]})},et=n(183),tt=function(){return Object(w.jsxs)(a.e,{py:10,px:6,align:"center",w:"full",justify:"center",direction:"column",children:[Object(w.jsx)(a.i,{display:"inline-block",size:"3xl",bgGradient:"linear(to-r, teal.400, teal.600)",backgroundClip:"text",children:"404"}),Object(w.jsx)(a.n,{fontSize:"18px",mt:3,mb:2,children:"Not Found"}),Object(w.jsx)(a.n,{color:"gray.500",mb:6,children:"No encontramos la p\xe1gina que est\xe1 intentando acceder"}),Object(w.jsx)(l.b,{to:"/",children:Object(w.jsx)(u.a,{colorScheme:"teal",bgGradient:"linear(to-r, teal.400, teal.500, teal.600)",color:"white",variant:"solid",children:"Ir a inicio"})})]})},nt=n(182),ct=function(){return Object(w.jsxs)(a.e,{w:[100,200,300,400],align:"center",boxShadow:"lg",my:2,p:2,children:[Object(w.jsx)(nt.b,{size:"10",me:2}),Object(w.jsx)(nt.c,{mt:"4",noOfLines:3,spacing:"4",flex:"1"})]})},rt=function(){return Object(w.jsxs)(a.e,{h:"100vh",gap:"2",children:[Object(w.jsxs)(a.e,{direction:"column",bg:Object(i.c)("gray.50","gray.700"),p:2,justify:"space-between",h:"full",children:[Object(w.jsx)(nt.a,{height:"40px",w:"50px",rounded:"lg"}),Object(w.jsx)(nt.a,{height:"40px",w:"50px",rounded:"lg"}),Object(w.jsx)(nt.a,{height:"40px",w:"50px",rounded:"lg"})]}),Object(w.jsxs)(a.a,{bg:Object(i.c)("gray.100","gray.800"),p:3,overflow:"hidden",children:[Object(w.jsx)(ct,{}),Object(w.jsx)(ct,{}),Object(w.jsx)(ct,{}),Object(w.jsx)(ct,{}),Object(w.jsx)(ct,{}),Object(w.jsx)(ct,{}),Object(w.jsx)(ct,{}),Object(w.jsx)(ct,{}),Object(w.jsx)(ct,{}),Object(w.jsx)(ct,{}),Object(w.jsx)(ct,{})]}),Object(w.jsx)(a.a,{bg:Object(i.c)("gray.50","gray.900"),flex:1,children:Object(w.jsxs)(a.e,{align:"center",justify:"space-between",children:[Object(w.jsxs)(a.e,{boxShadow:"lg",align:"center",my:2,p:2,children:[Object(w.jsx)(nt.b,{size:"10",me:2}),Object(w.jsx)(nt.c,{mt:"4",noOfLines:2,spacing:"4",flex:"1"})]}),Object(w.jsxs)(a.h,{children:[Object(w.jsx)(nt.a,{height:"40px",w:"50px",rounded:"lg"}),Object(w.jsx)(nt.a,{height:"40px",w:"50px",rounded:"lg"})]})]})})]})},ot=function(e){var t=e.users,n=void 0===t?[]:t;return Object(w.jsxs)(et.a,{variant:"simple",size:"sm",children:[Object(w.jsx)(et.f,{children:Object(w.jsx)(et.g,{children:Object(w.jsx)(et.e,{children:"Usuarios"})})}),Object(w.jsx)(et.b,{children:Object(w.jsx)(et.g,{children:Object(w.jsx)(et.c,{children:n.map((function(e){return Object(w.jsx)(qe,{user:e},e._id)}))})})}),Object(w.jsx)(et.d,{children:Object(w.jsx)(et.g,{children:Object(w.jsxs)(et.e,{isNumeric:!0,children:["Total : ",n.length]})})})]})},st=function(){var e,t=Object(c.useState)(1),n=Object(x.a)(t,2),r=n[0],o=n[1],s=Object(i.c)("hsla(0,0%,100%,.8)","linear-gradient(112.83deg, rgba(255, 255, 255, 0.21) 0%, rgba(255, 255, 255, 0) 110.84%)"),b=Object(i.c)("white","gray.800"),h=Object(c.useContext)(y),f=h.auth.user,m=h.setAuth,g=Object(j.i)().id,p=Object(c.useState)(g?null:f),S=Object(x.a)(p,2),C=S[0],k=S[1],z=Object(c.useState)(!1),I=Object(x.a)(z,2),A=I[0],N=I[1],q=Object(F.b)();if(Object(c.useEffect)((function(){g?(N(!0),v({url:"user/".concat(g),method:"POST",headers:{Authorization:localStorage.getItem("token")}}).then((function(e){k(e.data),N(!1)})).catch((function(e){console.log(e.response),N(!1)}))):k(f)}),[g,f]),A)return Object(w.jsx)(rt,{});if(!C)return Object(w.jsx)(tt,{});var P=function(){v({url:"user/follow",method:"POST",data:{id:C._id},headers:{Authorization:localStorage.getItem("token")}}).then((function(e){console.log(e.data),m((function(t){return Object(O.a)(Object(O.a)({},t),{},{user:e.data.me})})),k(e.data.user)})).catch((function(e){console.log(e.response)}))};return Object(w.jsxs)(a.e,{direction:"column",flex:"1",p:"3",children:[Object(w.jsxs)(a.a,{mb:"5",children:[Object(w.jsx)(a.a,{bgImage:"https://fondosmil.com/fondo/31355.jpg",w:"100%",h:{base:"200px",lg:"300px"},borderRadius:"2xl",bgPosition:"50%",bgRepeat:"no-repeat",backgroundSize:"cover"}),Object(w.jsxs)(a.e,{direction:{base:"column",md:"row"},w:"90%",justifyContent:{sm:"center",md:"space-between"},align:"center",backdropFilter:"saturate(200%) blur(60px)",boxShadow:"0px 2px 5.5px rgba(0, 0, 0, 0.02)",border:"2px solid",borderColor:"blue.900",bg:s,p:"15px",rounded:"2xl",mt:"-60px",mx:"auto",children:[Object(w.jsxs)(a.e,{align:"center",mb:{sm:"10px",md:"0px"},direction:{base:"column",md:"row"},w:{sm:"100%"},textAlign:{sm:"center",md:"start"},children:[Object(w.jsx)(_.a,{me:{md:"22px"},src:null!==(e=C.picture)&&void 0!==e?e:E(C.email),w:"80px",h:"80px",borderRadius:"15px"}),Object(w.jsxs)(a.e,{direction:"column",maxWidth:"100%",my:{sm:"14px"},children:[Object(w.jsx)(a.n,{fontSize:{sm:"lg",lg:"xl"},color:"gray.200",fontWeight:"bold",ms:{sm:"8px",md:"0px"},children:C.firstName+" "+C.lastName}),Object(w.jsx)(a.n,{fontSize:{sm:"sm",md:"md"},color:"gray.400",fontWeight:"semibold",children:C.email}),g&&g!==f._id&&Object(w.jsxs)(a.a,{children:[C.followers.some((function(e){return e._id===f._id}))?Object(w.jsx)(u.a,{size:"sm",variant:"outline",onClick:P,children:"unfollow"}):Object(w.jsx)(u.a,{size:"sm",variant:"solid",onClick:P,children:"follow"}),Object(w.jsx)(l.b,{to:"/messages",onClick:function(){q(G(C))},children:Object(w.jsx)(u.a,{size:"sm",variant:"solid",ms:"1",children:Object(w.jsx)(ke.c,{})})})]})]})]}),Object(w.jsxs)(a.e,{direction:{base:"column",lg:"row"},w:{sm:"100%",md:"50%",lg:"auto"},children:[Object(w.jsxs)(u.a,{bg:1===r?"hsla(0,0%,100%,.3)":"transparent",borderRadius:"15px",_focus:{shadow:"none"},onClick:function(){o(1)},_hover:{},children:[Object(w.jsx)(d.a,{icon:["fa","user"]}),Object(w.jsxs)(a.n,{fontSize:"xs",fontWeight:"bold",mx:"2",children:[C.followers.length," Seguidores"]})]}),Object(w.jsxs)(u.a,{bg:2===r?"hsla(0,0%,100%,.3)":"transparent",borderRadius:"15px",_focus:{shadow:"none"},onClick:function(){o(2)},_hover:{},children:[Object(w.jsx)(d.a,{icon:["fa","user-check"]}),Object(w.jsxs)(a.n,{fontSize:"xs",fontWeight:"bold",mx:"2",children:[C.following.length," Seguidos"]})]}),Object(w.jsxs)(u.a,{bg:3===r?"hsla(0,0%,100%,.3)":"transparent",borderRadius:"15px",_focus:{shadow:"none"},_hover:{},children:[Object(w.jsx)(d.a,{icon:["fa","code"]}),Object(w.jsx)(a.n,{fontSize:"xs",fontWeight:"bold",mx:"2",children:"options"})]})]})]})]}),Object(w.jsxs)(a.f,{templateColumns:"repeat(12,1fr)",gap:"2",children:[Object(w.jsx)(a.g,{colSpan:[12,12,6,4],children:Object(w.jsxs)(a.a,{boxShadow:"xl",p:{base:"2",lg:"6"},rounded:"2xl",bg:b,children:[Object(w.jsx)(a.a,{p:"12px 5px",mb:"12px",children:Object(w.jsx)(a.n,{fontSize:"lg",fontWeight:"bold",children:"Mis datos"})}),Object(w.jsx)(a.a,{px:"5px",children:Object(w.jsxs)(a.k,{spacing:3,children:[Object(w.jsxs)(a.l,{children:[Object(w.jsx)(a.n,{color:"gray.500",fontWeight:"bold",d:"inline",children:"Username:"})," \xa0 ",Object(w.jsx)(a.n,{color:"gray.500",d:"inline",children:C.username})]}),Object(w.jsxs)(a.l,{children:[Object(w.jsx)(a.n,{color:"gray.500",fontWeight:"bold",d:"inline",children:"Nombres"})," \xa0 ",Object(w.jsx)(a.n,{color:"gray.500",d:"inline",children:C.firstName})]}),Object(w.jsxs)(a.l,{children:[Object(w.jsx)(a.n,{color:"gray.500",fontWeight:"bold",d:"inline",children:"Apellidos"})," \xa0 ",Object(w.jsx)(a.n,{color:"gray.500",d:"inline",children:C.lastName})]}),Object(w.jsxs)(a.l,{children:[Object(w.jsx)(a.n,{color:"gray.500",fontWeight:"bold",d:"inline",children:"Email"})," \xa0 ",Object(w.jsx)(a.n,{color:"gray.500",d:"inline",children:C.email})]}),Object(w.jsxs)(a.l,{children:[Object(w.jsx)(a.n,{color:"gray.500",fontWeight:"bold",d:"inline",children:"G\xe9nero"})," \xa0 ",Object(w.jsx)(a.n,{color:"gray.500",d:"inline",children:C.gender})]}),Object(w.jsxs)(a.l,{children:[Object(w.jsx)(a.n,{color:"gray.500",fontWeight:"bold",d:"inline",children:"\xdaltima sesi\xf3n:"})," \xa0 ",Object(w.jsxs)(a.n,{color:"gray.500",d:"inline",children:[" ",xe(C.lastLogin)]})]})]})})]})}),Object(w.jsx)(a.g,{colSpan:[12,12,5,7],children:Object(w.jsx)(a.a,{boxShadow:"xl",children:Object(w.jsx)(ot,{users:1===r?C.followers:C.following})})})]})]})},it=function(){var e=Object(i.c)("gray.100","gray.700");return Object(w.jsxs)(a.e,{h:"100vh",gap:"2",children:[Object(w.jsx)(a.a,{bg:e,p:1,children:Object(w.jsx)(H,{})}),Object(w.jsx)(j.b,{})]})},at=function(e){var t=e.children;return Object(c.useContext)(y).auth.token?t:Object(w.jsx)(j.a,{to:"auth/login"})},lt=function(e){var t=e.children;return Object(c.useContext)(y).auth.token?Object(w.jsx)(j.a,{to:"/"}):t},jt=function(){var e=Object(c.useContext)(y),t=e.auth,n=e.checkToken;return Object(c.useEffect)((function(){n()}),[n]),t.cheking?Object(w.jsx)(rt,{}):Object(w.jsx)(l.a,{children:Object(w.jsxs)(j.e,{children:[Object(w.jsxs)(j.c,{path:"/*",element:Object(w.jsx)(at,{children:Object(w.jsx)(it,{})}),children:[Object(w.jsx)(j.c,{index:!0,element:Object(w.jsx)($e,{})}),Object(w.jsx)(j.c,{path:"profile",element:Object(w.jsx)(st,{})}),Object(w.jsx)(j.c,{path:"profile/:id",element:Object(w.jsx)(st,{})}),Object(w.jsx)(j.c,{path:"messages",element:Object(w.jsx)(Te,{})})]}),Object(w.jsxs)(j.c,{path:"auth/*",element:Object(w.jsxs)(lt,{children:[" ",Object(w.jsx)(j.b,{})]}),children:[Object(w.jsx)(j.c,{path:"login",element:Object(w.jsx)(be,{})}),Object(w.jsx)(j.c,{path:"signup",element:Object(w.jsx)(be,{})})]})]})})},dt=n(5),bt=n(25),ut=n(92),ht=n(199),Ot={userSelected:null,users:[],chats:[],messages:[]},xt=Object(ut.b)({chat:function(){var e,t,n,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case q:return Object(O.a)(Object(O.a)({},c),{},{users:r.payload});case P:return(null===(e=c.userSelected)||void 0===e?void 0:e._id)===r.payload._id?c:Object(O.a)(Object(O.a)({},c),{},{userSelected:r.payload,messages:[]});case R:return(null===(t=c.userSelected)||void 0===t?void 0:t._id)===r.payload.from._id||(null===(n=c.userSelected)||void 0===n?void 0:n._id)===r.payload.to._id?Object(O.a)(Object(O.a)({},c),{},{messages:[].concat(Object(Ve.a)(c.messages),[r.payload])}):c;case L:return Object(O.a)(Object(O.a)({},c),{},{messages:r.payload});case T:return Ot;case W:return Object(O.a)(Object(O.a)({},c),{},{chats:r.payload});case M:return Object(O.a)(Object(O.a)({},c),{},{chats:c.chats.map((function(e){return e._id===r.payload?Object(O.a)(Object(O.a)({},e),{},{typing:!0}):e}))});case U:return Object(O.a)(Object(O.a)({},c),{},{chats:c.chats.map((function(e){return e._id===r.payload?Object(O.a)(Object(O.a)({},e),{},{typing:!1}):e}))});default:return c}}}),ft="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ut.c,mt=Object(ut.d)(xt,ft(Object(ut.a)(ht.a))),gt={global:function(e){return{body:{fontFamily:"body",color:Object(dt.h)("gray.900","gray.300")(e),bg:Object(dt.h)("white.50","gray.900")(e),lineHeight:"base"},"*::placeholder":{color:Object(dt.h)("gray.400","whiteAlpha.500")(e)},"*, *::before, &::after":{borderColor:Object(dt.h)("gray.200","whiteAlpha.300")(e),wordWrap:"break-word"}}}},pt=Object(bt.b)({styles:gt});var vt=function(){return Object(w.jsx)(bt.a,{theme:pt,children:Object(w.jsx)(C,{children:Object(w.jsx)(F.a,{store:mt,children:Object(w.jsx)(Se,{children:Object(w.jsx)(jt,{})})})})})};s.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(vt,{})}),document.getElementById("root"))}},[[366,1,2]]]);
//# sourceMappingURL=main.381e03ff.chunk.js.map